version: '2.1'

# This can ONLY be used when the TLS settings are not specified in the Fluentd aggregator
services:
  logsource_driver:
    container_name: logsource_driver
    depends_on:
      elasticsearch:
        condition: service_healthy
      fluentd:
        condition: service_healthy
    hostname: logsource_driver
    image: httpd:alpine
    links:
      - fluentd
    logging:
      driver: fluentd
      options:
        fluentd-address: fluentd:24224
        tag: "{{.ImageName}}/{{.Name}}/{{.ID}}"
    networks:
      - efk
    ports:
      - "80:80"
